{"version":3,"sources":["components/hooks/useSortableData.js","components/assets/img/btnedit.png","components/buttons/EditBtn.js","components/assets/img/close.png","components/modals/queries.js","components/modals/AddDirectorForm.js","components/modals/deleteElement/delElement.js","components/directors/Directors.js","components/modals/editElement/EditDirector.js","components/pagination/Pagination.js","components/directors/DirectorsQuery.js","components/modals/AddMovieForm.js","components/modals/editElement/EditElement.js","components/modals/editElement/QuerieGetMovie.js","components/movies/Movies.js","components/movies/MoviesQuery.js","components/nav/Navigation.js","components/MainComponent.js","App.js","index.js"],"names":["useSortableData","items","config","useState","sortConfig","setSortConfig","sortedItems","useMemo","sortedCol","sort","a","b","key","direction","requestSort","EditBtn","props","isShowPrompt","setIsShowPrompt","className","src","btnEdit","width","height","alt","onClick","setTimeout","openModalEdit","id","openDelElemConfirm","AddDirector","gql","AddMovie","DeleteDirector","DeleteMovie","GetDirector","GetMovie","UpdateMovie","UpdateDirector","AddElementForm","name","setName","age","setAge","useMutation","addDirector","onSubmit","e","preventDefault","variables","Number","refetchQueries","query","GetDirectors","openModalAdd","type","placeholder","value","onChange","target","close","DeleteElement","openDelConfirm","handleDelElement","Directors","data","isAddDirector","setIsAddDirector","isEditDirector","setIsEditDirector","isDelDirector","setIsDelDirector","directorId","setDirectorId","deleteDirector","title","map","director","index","directfilms","movies","m","isMovie","AddDirectorForm","EditDirector","nameDirector","ageDirector","updateDirector","Pagination","pagesCount","changePageHandler","activePage","pagesList","i","push","GetDirectorsQuery","useQuery","loading","error","setActivePage","allItemsCount","directors","length","Math","ceil","start","directorsList","filter","item","page","GetDirectorQuery","SelectDirector","handleChange","movieDirector","d","AddMovieForm","genre","setGenre","addMovie","GetMovies","EditElement","dataMovie","attr","updateMovie","QueryGetMovie","movie","Movies","isAddMovie","setIsAddMovie","isEditMovie","setIsEditMovie","isDelMovie","setIsDelMovie","setId","deleteMovie","MoviesQuery","moviesList","Navigation","selectContent","onNavChange","MainComponent","setSelectContent","style","textAlign","event","client","ApolloClient","cache","InMemoryCache","uri","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cfef10c9.chunk.js","sourcesContent":["import { useMemo, useState } from \"react\";\r\n\r\nconst useSortableData = (items, config = null)=>{\r\n    const [sortConfig, setSortConfig] = useState(config);// хук для сортировки\r\n    \r\n    const sortedItems = useMemo(()=>{\r\n        const sortedCol = [...items] //копия с данными\r\n        \r\n        // определяем правила сортировки\r\n        if (sortConfig !== null) {\r\n          sortedCol.sort((a, b) => {\r\n            if (a[sortConfig.key] < b[sortConfig.key]) {\r\n              return sortConfig.direction === \"ascending\" ? -1 : 1;\r\n            }\r\n            if (a[sortConfig.key] > b[sortConfig.key]) {\r\n              return sortConfig.direction === \"ascending\" ? 1 : -1;\r\n            }\r\n            return 0;\r\n          });\r\n        }\r\n        return sortedCol;\r\n      },[items,sortConfig])\r\n    \r\n    //ф-ия добавляет в state данные key и direction (имя поля и направления сортировки) \r\n    const requestSort = key => {\r\n      let direction = 'ascending';\r\n      if (sortConfig && sortConfig.key === key && sortConfig.direction === 'ascending') {\r\n        direction = 'descending';\r\n      }\r\n      setSortConfig({ key, direction });\r\n    }\r\n\r\n    return {sortedItems, requestSort}\r\n}\r\n\r\nexport default useSortableData;","export default __webpack_public_path__ + \"static/media/btnedit.987cd358.png\";","import React, { useState } from \"react\";\r\nimport btnEdit from \"../assets/img/btnedit.png\";\r\nimport \"./EditBtn.css\";\r\n\r\nconst EditBtn = (props) => {\r\n  const [isShowPrompt, setIsShowPrompt] = useState(false)\r\n  \r\n  const showPrompt = () => {\r\n    setIsShowPrompt(true)\r\n    setTimeout(()=>setIsShowPrompt(false), 3000)\r\n  }\r\n\r\n  const handleClickEdit=()=>{\r\n    props.openModalEdit(true, props.id);\r\n    setIsShowPrompt(false)\r\n  }\r\n  \r\n\r\n  const handleClickDel=()=>{\r\n    props.openDelElemConfirm(true, props.id);\r\n    setIsShowPrompt(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"btn-edit-container\">\r\n      <img\r\n        className=\"btn-edit-container_btn-edit\"\r\n        src={btnEdit}\r\n        width=\"32px\"\r\n        height=\"32px\"\r\n        alt=\"img\"\r\n        onClick ={showPrompt}\r\n      />\r\n      {isShowPrompt ? (<div className=\"btn-edit-container__prompt-on-btn prompt-on-btn\">\r\n        <div className=\"prompt-on-btn_mode\" onClick={handleClickEdit}>Изменить</div>\r\n        <div className=\"prompt-on-btn_mode\" onClick={handleClickDel}>Удалить</div>\r\n      </div>) : null\r\n      }\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditBtn;\r\n","export default \"data:image/png;base64,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\"","import { gql } from '@apollo/client';\r\n\r\nexport const AddDirector = gql`\r\n  mutation addDirector($name: String!, $age: Int!) {\r\n    addDirector(name: $name, age:$age) {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nexport const AddMovie = gql`\r\n  mutation addMovie($name: String!, $genre: String!, $directorId: ID) {\r\n    addMovie(name: $name, genre:$genre, directorId:$directorId) {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nexport const DeleteDirector = gql`\r\n  mutation deleteDirector($id: ID!) {\r\n    deleteDirector(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const DeleteMovie = gql`\r\n  mutation deleteMovie($id: ID!) {\r\n    deleteMovie(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GetDirector = gql`\r\nquery GetDirector($id: ID!) {\r\n  director(id: $id) {\r\n    id\r\n    name\r\n    age\r\n    movies {\r\n      id\r\n      name\r\n    }\r\n  }\r\n}\r\n`;\r\n\r\nexport const GetMovie = gql`\r\nquery GetMovie($id: ID) {\r\n  movie(id: $id) {\r\n    id\r\n    name\r\n    genre\r\n    director {\r\n      id\r\n      name\r\n    }\r\n  }\r\n}\r\n`;\r\n\r\nexport const UpdateMovie= gql`\r\nmutation UpdateMovie($id:ID,$name: String!, $genre: String!, $directorId: ID) {\r\n  updateMovie(id:$id, name: $name, genre: $genre,directorId:$directorId){\r\n   name\r\n  }\r\n}\r\n`;\r\n\r\nexport const UpdateDirector= gql`\r\nmutation UpdateDirector($id:ID,$name: String!, $age: Int!) {\r\n  updateDirector(id:$id, name: $name, age: $age){\r\n   name\r\n  }\r\n}\r\n`;\r\n\r\n","import React, { useState } from \"react\";\r\nimport \"./AddElementForm.css\"\r\nimport close from \"../assets/img/close.png\"\r\nimport { useMutation } from '@apollo/client';\r\nimport { AddDirector } from \"./queries\";\r\nimport { GetDirectors } from \"../directors/DirectorsQuery\";\r\n\r\nconst AddElementForm =(props)=>{\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [age, setAge] = useState(\"\")\r\n\r\n    const [addDirector] = useMutation(AddDirector);\r\n\r\n    const closeModal = () =>{\r\n        props.openModalAdd(false)\r\n    }\r\n\r\n    const handleSubmit = (e)=>{\r\n        e.preventDefault();\r\n        addDirector({ variables: { name, age:Number(age) }, refetchQueries:[{query:GetDirectors}] }); // refetchQueries - для получения новых данных и их отрисовка\r\n        props.openModalAdd(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <div className=\"modal-container\">\r\n                <form className=\"modal-form\" onSubmit={handleSubmit}>\r\n                    <div className=\"modal-form__input-block\"><label>Name</label>\r\n                    <input type=\"text\" placeholder=\"Name\" value={name} onChange={(e)=>setName(e.target.value)}/></div>\r\n                    <div className=\"modal-form__input-block\"><label>Age</label>\r\n                    <input type=\"text\" placeholder=\"Age\" value={age} onChange={(e)=>setAge(e.target.value)}/></div>\r\n                    <button type=\"submit\" className=\"pressed-button\">Add director</button>\r\n                </form>\r\n                <div className=\"close\" onClick={closeModal}><img src={close} width=\"24px\" height=\"24px\" alt=\"img\"/></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddElementForm;","import React from \"react\";\r\nimport \"./delElement.css\"\r\n\r\nconst DeleteElement = (props)=>{\r\n    return(\r\n        <div className=\"del-element-container\">\r\n            <div className=\"del-element-container__content\">\r\n                <p>Подтвердите удаление</p>\r\n                <div className=\"del-element-container__content_btns\">\r\n                    <button onClick={()=>props.openDelConfirm(false)}>Отменить</button>\r\n                    <button onClick={(e)=>props.handleDelElement(e)}>Применить</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DeleteElement;","import React, { useState } from \"react\";\r\nimport useSortableData from \"../hooks/useSortableData\";\r\nimport EditBtn from \"../buttons/EditBtn\";\r\nimport AddDirectorForm from \"../modals/AddDirectorForm\";\r\nimport DeleteElement from \"../modals/deleteElement/delElement\";\r\nimport { useMutation } from '@apollo/client';\r\nimport { DeleteDirector } from \"../modals/queries\";\r\nimport { GetDirectorQuery, GetDirectors } from \"./DirectorsQuery\";\r\n\r\nconst Directors = (props) => {\r\n  const data = props.data;\r\n  \r\n  const { sortedItems, requestSort } = useSortableData(data);\r\n\r\n  //для отслеживания открытия модального окна(формы) добавления режисера\r\n  const [isAddDirector, setIsAddDirector] = useState(false); \r\n\r\n  //для отслеживания открытия модального окна(формы) изменения режисера\r\n  const [isEditDirector, setIsEditDirector] = useState(false);\r\n\r\n  //для отслеживания открытия окна подтверждения удаления режисера\r\n  const [isDelDirector, setIsDelDirector] = useState(false); \r\n\r\n  //для получения id элемента для изменения и удаления\r\n  const [directorId,setDirectorId] = useState(null);\r\n\r\n  const [deleteDirector] = useMutation(DeleteDirector);\r\n\r\n  const openModalAdd = (value) => {\r\n    setIsAddDirector(value);\r\n  };\r\n\r\n  const openModalEdit = (value,directorId) => {\r\n    setIsEditDirector(value);\r\n    setDirectorId(directorId);\r\n  };\r\n\r\n  const openDelConfirm = (value, directorId) => {\r\n    setIsDelDirector(value);\r\n    setDirectorId(directorId)\r\n  };\r\n\r\n  const handleDelElement = ()=>{\r\n     deleteDirector({ variables: { directorId }, refetchQueries:[{query:GetDirectors}] }); // refetchQueries - для получения новых данных и их отрисовка\r\n     setIsDelDirector(false)\r\n}\r\n\r\n  return (\r\n    <div className=\"content__table-data\">\r\n      <table>\r\n        <caption>{props.title}</caption>\r\n        <thead>\r\n          <tr>\r\n            <th className=\"th7\">№</th>\r\n            <th onClick={() => requestSort(\"name\")}>Режисер</th>\r\n            <th className=\"th20\" onClick={() => requestSort(\"age\")}>Возраст</th>\r\n            <th>Movies</th>\r\n            <th className=\"th10\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {sortedItems.map((director, index) => {\r\n            const directfilms = director.movies.map((m) => <p key={m.id}>{m.name}</p>);\r\n            return (\r\n              <tr key={director.id}>\r\n                <td>{index + 1}</td>\r\n                <td>{director.name}</td>\r\n                <td>{director.age}</td>\r\n                <td>{directfilms}</td>\r\n                <td>\r\n                  <EditBtn openDelElemConfirm={openDelConfirm} openModalEdit={openModalEdit} isMovie={false} id={director.id}/>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"btn-add\" onClick={() => openModalAdd(true)}>\r\n        +\r\n      </div>\r\n      {isAddDirector ? <AddDirectorForm openModalAdd={openModalAdd} /> : null}\r\n      {isEditDirector ? <GetDirectorQuery openModalEdit={openModalEdit} directorId={directorId}/> : null}\r\n      {isDelDirector ? <DeleteElement openDelConfirm={openDelConfirm} handleDelElement={handleDelElement}/> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Directors;\r\n","import React, { useState } from \"react\";\r\nimport \"../AddElementForm.css\";\r\nimport close from \"../../assets/img/close.png\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { UpdateDirector } from \"../queries\";\r\nimport { GetDirectors } from \"../../directors/DirectorsQuery\";\r\n\r\nconst EditDirector = ({ data, openModalEdit }) => {\r\n  const directorId = data.id\r\n  const nameDirector = data.name;\r\n  const ageDirector = data.age;\r\n\r\n  const [name, setName] = useState(nameDirector);\r\n  const [age, setAge] = useState(ageDirector);\r\n\r\n  const [updateDirector] = useMutation(UpdateDirector);\r\n\r\n  const closeModal = () => {\r\n    openModalEdit(false);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    updateDirector({\r\n      variables: { id:directorId, name, age },\r\n      refetchQueries: [{ query: GetDirectors }],\r\n    }); // refetchQueries - для получения новых данных и их отрисовка\r\n    openModalEdit(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal-container\">\r\n        <form className=\"modal-form\" onSubmit={handleSubmit}>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Name</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Age</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Genre\"\r\n              value={age}\r\n              onChange={(e) => setAge(Number(e.target.value))}\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"pressed-button\">\r\n            Update\r\n          </button>\r\n        </form>\r\n        <div className=\"close\" onClick={closeModal}>\r\n          <img src={close} width=\"24px\" height=\"24px\" alt=\"img\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditDirector;\r\n","import React from \"react\";\r\nimport \"./Pagination.css\"\r\n\r\nconst Pagination=({pagesCount, changePageHandler, activePage})=>{\r\n\r\n    const pagesList=[]\r\n    for (let i=1;i<=pagesCount;i++) {\r\n        pagesList.push(i)\r\n    }\r\n\r\n    return (\r\n        <div className=\"paganation\">\r\n            <div className=\"pagination__container\">\r\n                {\r\n                   pagesList.map(i=><div key={i} className={`pagination__container_item ${activePage === i ? \"activePage\" : \"\"}`}  onClick={()=>changePageHandler(i)}>{i}</div>)\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Pagination;","import React, { useState } from \"react\";\r\nimport { useQuery, gql } from \"@apollo/client\";\r\nimport Directors from \"./Directors\";\r\nimport EditDirector from \"../modals/editElement/EditDirector\";\r\nimport { GetDirector } from \"../modals/queries\";\r\nimport Pagination from \"../pagination/Pagination\";\r\n\r\nexport const GetDirectors = gql`\r\n  query GetDirectors {\r\n    directors {\r\n      id\r\n      name\r\n      age\r\n      movies {\r\n        id\r\n        name\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GetDirectorsQuery = (props) => {\r\n  const { loading, error, data } = useQuery(GetDirectors);\r\n  const [activePage,setActivePage] = useState(1) \r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error :(</p>;\r\n\r\n  const allItemsCount = data.directors.length;\r\n  const onPageItemsCount = 4;\r\n  const pagesCount = Math.ceil(allItemsCount/onPageItemsCount) \r\n  const start = activePage - 1\r\n\r\n  const changePageHandler = (page)=>{\r\n    setActivePage(page);\r\n  }\r\n\r\n  const directorsList = data.directors.filter((item,index)=>{\r\n    if(index < onPageItemsCount*activePage && index>=onPageItemsCount*start) {\r\n      return item\r\n    }\r\n    return null\r\n  }) //список выводимых фильмов\r\n\r\n  return (\r\n    <>\r\n      <Directors title={props.title} data={directorsList} />\r\n      <div className=\"main-component__pagination\">\r\n        <Pagination pagesCount={pagesCount} changePageHandler={changePageHandler} activePage={activePage}/>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const GetDirectorQuery = ({openModalEdit,directorId}) => {\r\n  const { loading, error, data } = useQuery(GetDirector,{variables:{id:directorId}});\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error :(</p>;\r\n\r\n  return (\r\n    <>\r\n      <EditDirector data={data.director} openModalEdit={openModalEdit}/>\r\n    </>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport \"./AddElementForm.css\";\r\nimport close from \"../assets/img/close.png\";\r\nimport { GetDirectors } from \"../directors/DirectorsQuery\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { AddMovie } from \"./queries\";\r\nimport { GetMovies } from \"../movies/MoviesQuery\";\r\n\r\nexport const SelectDirector = ({handleChange, movieDirector}) => {\r\n  const { loading, error, data } = useQuery(GetDirectors);\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error :(</p>;\r\n  let id = null\r\n  let name = null\r\n  if (movieDirector) {id=movieDirector.id; name=movieDirector.name}\r\n  const items = data.directors;\r\n  return (\r\n    <label>\r\n      <p>Выберете режисера</p>\r\n      <select name=\"directors\" onChange={handleChange}>\r\n        <option name=\"null\" value={id}>{name}</option>\r\n        {items.map((d) => {\r\n          return <option name={d.name} value={d.id} key={d.id}>{d.name}</option>;\r\n        })}\r\n      </select>\r\n    </label>\r\n  );\r\n};\r\n\r\nconst AddMovieForm = (props) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [genre, setGenre] = useState(\"\");\r\n  const [directorId, setDirectorId] = useState(null);\r\n\r\n  const [addMovie] = useMutation(AddMovie);\r\n\r\n  const closeModal = () => {\r\n    props.openModalAdd(false);\r\n  };\r\n\r\n  const handleChange=(e)=>{\r\n    setDirectorId(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    addMovie({\r\n      variables: { name, genre, directorId },\r\n      refetchQueries: [{ query: GetMovies }],\r\n    }); // refetchQueries - для получения новых данных и их отрисовка\r\n    props.openModalAdd(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal-container\">\r\n        <form className=\"modal-form\" onSubmit={handleSubmit}>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Name</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Genre</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Genre\"\r\n              value={genre}\r\n              onChange={(e) => setGenre(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"modal-form__input-block\">\r\n            <SelectDirector handleChange={handleChange}/>\r\n          </div>\r\n          <button type=\"submit\" className=\"pressed-button\">\r\n            Add movie\r\n          </button>\r\n        </form>\r\n        <div className=\"close\" onClick={closeModal}>\r\n          <img src={close} width=\"24px\" height=\"24px\" alt=\"img\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMovieForm;\r\n","import React, {useState } from \"react\";\r\nimport \"../AddElementForm.css\";\r\nimport close from \"../../assets/img/close.png\";\r\nimport { useMutation} from \"@apollo/client\";\r\nimport { UpdateMovie} from \"../queries\";\r\nimport { GetMovies } from \"../../movies/MoviesQuery\";\r\nimport {SelectDirector} from \"../AddMovieForm\"\r\n\r\n\r\nconst EditElement = ({dataMovie, attr}) => {\r\n\r\n  const id = dataMovie.id;\r\n  const [name, setName] = useState(dataMovie.name);\r\n  const [genre, setGenre] = useState(dataMovie.genre);\r\n\r\n  const [directorId, setDirectorId] = useState(null);\r\n\r\n  const [updateMovie] = useMutation(UpdateMovie);\r\n\r\n  const closeModal = () => {\r\n    attr.openModalEdit(false);\r\n  };\r\n\r\n  const handleChange=(e)=>{\r\n    setDirectorId(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    updateMovie({\r\n      variables: { id, name, genre, directorId },\r\n      refetchQueries: [{ query: GetMovies }],\r\n    }); // refetchQueries - для получения новых данных и их отрисовка\r\n    attr.openModalEdit(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal-container\">\r\n        <form className=\"modal-form\" onSubmit={handleSubmit}>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Name</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"modal-form__input-block\">\r\n            <label>Genre</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Genre\"\r\n              value={genre}\r\n              onChange={(e) => setGenre(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"modal-form__input-block\">\r\n            <SelectDirector handleChange={handleChange} movieDirector ={dataMovie.director ? dataMovie.director : null}/> \r\n          </div>\r\n          <button type=\"submit\" className=\"pressed-button\">\r\n            Add movie\r\n          </button>\r\n        </form>\r\n        <div className=\"close\" onClick={closeModal}>\r\n          <img src={close} width=\"24px\" height=\"24px\" alt=\"img\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditElement;\r\n","import React from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport EditElement from \"./EditElement\";\r\nimport { GetMovie } from \"../queries\";\r\n\r\n\r\nconst QueryGetMovie = (props) => {\r\n  //получаем данные фильма для внесения изменений\r\n  const { loading, data } = useQuery(GetMovie,{variables:{id:props.id}});\r\n  if (loading) return <p>Loading...</p>\r\n  return (\r\n    <>\r\n      <EditElement dataMovie={data.movie} attr={props}/>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default QueryGetMovie;","import React, { useState } from \"react\";\r\nimport useSortableData from \"../hooks/useSortableData\";\r\nimport EditBtn from \"../buttons/EditBtn\";\r\nimport AddMovieForm from \"../modals/AddMovieForm\";\r\nimport { DeleteMovie } from \"../modals/queries\";\r\nimport { useMutation } from '@apollo/client';\r\nimport { GetMovies } from \"./MoviesQuery\";\r\nimport DeleteElement from \"../modals/deleteElement/delElement\";\r\nimport QueryGetMovie from \"../modals/editElement/QuerieGetMovie\";\r\n\r\nconst Movies = (props) => {\r\n  const data = props.data;\r\n  const { sortedItems, requestSort } = useSortableData(data);\r\n\r\n  //для отслеживания открытия модального окна(формы) добавления фильма\r\n  const [isAddMovie, setIsAddMovie] = useState(false);\r\n  const [isEditMovie, setIsEditMovie] = useState(false);\r\n  const [isDelMovie, setIsDelMovie] = useState(false);\r\n\r\n  //для получения id элемента для изменения и удаления\r\n  const [id, setId] = useState(null);\r\n\r\n  const [deleteMovie] = useMutation(DeleteMovie);\r\n\r\n  const openModalAdd = (value) => {\r\n    setIsAddMovie(value);\r\n  };\r\n\r\n  const openModalEdit = (value,id) => {\r\n    setIsEditMovie(value);\r\n    setId(id);\r\n  };\r\n\r\n  const openDelConfirm = (value, id) => {\r\n    setIsDelMovie(value);\r\n    setId(id);\r\n  };\r\n\r\n  const handleDelElement = () => {\r\n    deleteMovie({\r\n      variables: { id },\r\n      refetchQueries: [{ query: GetMovies }],\r\n    }); // refetchQueries - для получения новых данных и их отрисовка\r\n    setIsDelMovie(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"content__table-data\">\r\n      <table>\r\n        <caption>{props.title}</caption>\r\n        <thead>\r\n          <tr>\r\n            <th className=\"th7\">№</th>\r\n            <th onClick={() => requestSort(\"name\")}>Название</th>\r\n            <th className=\"th20\" onClick={() => requestSort(\"genre\")}>Жанр</th>\r\n            <th onClick={() => requestSort(\"directorId\")}>Режисер</th>\r\n            <th className=\"th10\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {sortedItems.map((movie, index) => (\r\n            <tr key={movie.id}>\r\n              <td>{index + 1}</td>\r\n              <td>{movie.name}</td>\r\n              <td>{movie.genre}</td>\r\n              <td>{movie.director && movie.director.name}</td> \r\n              <td>\r\n                <EditBtn openDelElemConfirm={openDelConfirm} openModalEdit={openModalEdit} isMovie={true} id={movie.id}/>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"btn-add\" onClick={() => openModalAdd(true)}>\r\n        +\r\n      </div>\r\n      {isAddMovie ? <AddMovieForm openModalAdd={openModalAdd} /> : null}\r\n      {isEditMovie ? <QueryGetMovie openModalEdit={openModalEdit} id={id}/> : null}\r\n      {isDelMovie ? <DeleteElement openDelConfirm={openDelConfirm} handleDelElement={handleDelElement}/> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Movies;\r\n\r\n\r\n","import React, { useState } from \"react\";\r\nimport { useQuery, gql } from \"@apollo/client\";\r\nimport Movies from \"./Movies\";\r\nimport Pagination from \"../pagination/Pagination\";\r\n\r\nexport const GetMovies = gql`\r\n  query GetMovies {\r\n    movies {\r\n      id\r\n      name\r\n      genre\r\n      director {\r\n        id\r\n        name\r\n        age\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst MoviesQuery = (props) => {\r\n  const { loading, error, data } = useQuery(GetMovies);\r\n  const [activePage,setActivePage] = useState(1) \r\n  \r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error :(</p>;\r\n\r\n  const allItemsCount = data.movies.length;\r\n  const onPageItemsCount = 10;\r\n  const pagesCount = Math.ceil(allItemsCount/onPageItemsCount) \r\n  const start = activePage - 1\r\n\r\n  const changePageHandler = (page)=>{\r\n    setActivePage(page);\r\n  }\r\n\r\n  const moviesList = data.movies.filter((item,index)=>{\r\n    if(index < onPageItemsCount*activePage && index>=onPageItemsCount*start) return item\r\n    return null\r\n  }) //список выводимых фильмов\r\n  \r\n  return (\r\n    <>\r\n      <Movies title={props.title} data={moviesList} />\r\n      <div className=\"main-component__pagination\">\r\n        <Pagination pagesCount={pagesCount} changePageHandler={changePageHandler} activePage={activePage}/>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MoviesQuery;\r\n","import React from \"react\";\r\nimport \"./Navigation.css\"\r\n\r\nconst Navigation = (props)=>{\r\n    return (\r\n        <div className=\"nav\">\r\n            <button name=\"movies\" className={`btn btn-nav ${props.selectContent === \"movies\" ? \"btn-nav-active\" : \"\"}`} onClick={(e)=>props.onNavChange(e)}>Movies</button>\r\n            <button name=\"directors\" className={`btn btn-nav ${props.selectContent === \"directors\" ? \"btn-nav-active\" : \"\"}`} onClick={(e)=>props.onNavChange(e)}>Directors</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navigation;","import React, { useState } from \"react\";\r\nimport {GetDirectorsQuery} from \"./directors/DirectorsQuery\";\r\nimport \"./MainComponent.css\";\r\nimport MoviesQuery from \"./movies/MoviesQuery\";\r\nimport Navigation from \"./nav/Navigation\";\r\n\r\nconst MainComponent = () => {\r\n  const styleC = {\r\n    textAlign: \"center\",\r\n    height: \"50px\",\r\n  };\r\n  const [selectContent, setSelectContent] = useState(\"movies\");\r\n\r\n  const handleNavSelect = (event) => {\r\n    setSelectContent(event.target.name);\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-component\">\r\n      <header className=\"header\" style={styleC}>\r\n        <h1>React App with GraphQl </h1>\r\n      </header>\r\n      <div className=\"container\">\r\n        <div className=\"main-component__header\">\r\n          <Navigation\r\n            onNavChange={handleNavSelect}\r\n            selectContent={selectContent}\r\n          />\r\n        </div>\r\n        <div className=\"main-component__content content\">\r\n          {selectContent === \"movies\" ? (\r\n            <MoviesQuery title=\"Фильмы\" />\r\n          ) : (\r\n            <GetDirectorsQuery title=\"Режисеры\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainComponent;\r\n","import React from \"react\";\r\nimport MainComponent from \"./components/MainComponent\";\r\nimport { ApolloProvider } from \"@apollo/client\";\r\nimport { ApolloClient, InMemoryCache } from \"@apollo/client\";\r\n\r\nconst client = new ApolloClient({\r\n  cache: new InMemoryCache(),\r\n  uri: \"https://salty-crag-83095.herokuapp.com/graphql\",\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <ApolloProvider client={client}>\r\n      <div className=\"app\">\r\n        <MainComponent />\r\n      </div>\r\n    </ApolloProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}